<?php
while (!file_exists($POSICION . "conexion.php")) {
    $POSICION .= "../";
}
require($POSICION . 'formHeader.php');
?>

<!-- Cargar JS del componente -->
<script src="<?= $POSICION ?>js/general.js"></script>

<!-- Contenedor principal -->
<div style="width: 400px; font-family: Arial, sans-serif;">

    <!-- Buscador por RUT -->
    <div style="margin-bottom: 10px;">
        <label for="rut">RUT</label><br>
        <input type="text" id="rut" name="rut" style="width: 200px;" />
        <button onclick="buscarCliente()">游댌</button>
        <button onclick="limpiarCampos()">Limpiar</button>
    </div>

    <!-- IFrame Cliente/Proveedor -->
    <div id="contenedorClienteProveedor"></div>

    <!-- IFrame Cliente/Proveedor Guardado -->
    <div id="contenedorClienteGuardado" style="margin-top: 10px;"></div>

</div>

<script type="text/javascript">
    // Ruta de im치genes del componente
    const imgDir = "<?= $POSICION ?>img/<?= $CSS_STYLE ?>/rows/";

    // URL del iframe CLIENTE / PROVEEDOR
    const urlCliente = "<?= $POSICION ?>form/clienteproveedor2.php";
    const urlGuardado = "<?= $POSICION ?>form/clienteproveedor_guardado.php";

    // Crear el primer componente
    const frame_cliente = new MyIFrame('clienteProveedor', 'CLIENTE / PROVEEDOR', urlCliente, imgDir);
    frame_cliente.height = 140;
    frame_cliente.verLoading = true;
    frame_cliente.show(true);
    frame_cliente.contract();

    // Crear el segundo componente
    const frame_guardado = new MyIFrame('clienteGuardado', 'CLIENTE / PROVEEDOR GUARDADO', urlGuardado, imgDir);
    frame_guardado.height = 120;
    frame_guardado.verLoading = true;
    frame_guardado.show(true);
    frame_guardado.contract();

    // Insertar en el DOM
    document.getElementById("contenedorClienteProveedor").appendChild(document.getElementById("iframe_clienteProveedor"));
    document.getElementById("contenedorClienteGuardado").appendChild(document.getElementById("iframe_clienteGuardado"));

    // Funci칩n Buscar
    function buscarCliente() {
        const rut = document.getElementById("rut").value;
        if (rut) {
            // Puedes agregar l칩gica para consultar por RUT
            frame_cliente.expand();
        }
    }

    // Funci칩n Limpiar
    function limpiarCampos() {
        document.getElementById("rut").value = "";
        frame_cliente.contract();
        frame_guardado.contract();
    }
</script>

<?php require($POSICION . "formFoot.php"); ?>
